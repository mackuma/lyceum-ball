<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –ö–∞—Ñ–µ–¥—Ä–∞ –§–æ—Ä—Ç—É–Ω—ã</title>
    <style>
        :root {
            --primary-gold: #ffd700;
            --win-green: #00c853;
            --lose-red: #d50000;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1a1a1a;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            transition: background-image 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
        }

        /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: -1;
        }

        h1 {
            color: var(--primary-gold);
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .casino-container {
            background: rgba(30, 30, 30, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid var(--primary-gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            background: #333;
            color: white;
            border: 1px solid var(--primary-gold);
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
        }

        /* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É–ª–µ—Ç–∫–∏ */
        .wheel-wrapper {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 0 auto 20px;
        }

        /* –°—Ç—Ä–µ–ª–∫–∞ —Ç–µ–ø–µ—Ä—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤—ã–π –±–æ–∫ (90deg), 
           —Ç–∞–∫ –ø—Ä–æ—â–µ —Å—á–∏—Ç–∞—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ –≤ CSS */
        .arrow-pointer {
            position: absolute;
            top: 50%;
            right: -15px;
            transform: translateY(-50%);
            width: 0; 
            height: 0; 
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-right: 25px solid #fff;
            z-index: 10;
            filter: drop-shadow(-2px 0 2px rgba(0,0,0,0.5));
        }

        .wheel-container {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid var(--primary-gold);
            box-shadow: 0 0 15px #000;
            overflow: hidden;
            position: relative;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            /* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS */
            --split-deg: 180deg; 
            /* –ì—Ä–∞–¥–∏–µ–Ω—Ç —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π */
            background: conic-gradient(
                var(--lose-red) 0deg var(--split-deg), 
                var(--win-green) var(--split-deg) 360deg
            );
            transition: transform 4s cubic-bezier(0.1, 0.7, 0.1, 1);
            transform: rotate(0deg);
        }

        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã */
        .wheel::after {
            content: "";
            position: absolute;
            top: 50%; left: 50%;
            width: 20px; height: 20px;
            background: var(--primary-gold);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 5px black;
        }

        button {
            background: linear-gradient(45deg, #d50000, #8b0000);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            transition: all 0.2s;
            text-transform: uppercase;
        }

        button:hover { filter: brightness(1.1); }
        button:active { transform: scale(0.98); }
        button:disabled { background: #555; cursor: not-allowed; transform: none; }

        .result-text {
            margin-top: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            min-height: 2em;
            line-height: 1.2;
        }

        .win { color: var(--win-green); text-shadow: 0 0 10px var(--win-green); }
        .lose { color: var(--lose-red); text-shadow: 0 0 10px var(--lose-red); }

        .disclaimer {
            margin-top: 30px;
            font-size: 0.75rem;
            color: #aaa;
            opacity: 0.8;
            max-width: 400px;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>–£–ù–ò–í–ï–†–°–ò–¢–ï–¢–°–ö–ê–Ø –†–£–õ–ï–¢–ö–ê</h1>

    <div class="casino-container">
        <label for="subjectSelect">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –∏ —Å—É–¥—å–±—É:</label>
        <select id="subjectSelect">
            </select>

        <div class="wheel-wrapper">
            <div class="arrow-pointer"></div>
            <div class="wheel-container">
                <div class="wheel" id="wheel"></div>
            </div>
        </div>

        <button id="spinBtn" onclick="spinRoulette()">–ò–°–ü–´–¢–ê–¢–¨ –£–î–ê–ß–£</button>

        <div id="result" class="result-text"></div>
    </div>

    <div class="disclaimer">
        –í–ù–ò–ú–ê–ù–ò–ï: –î–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä. 
        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –∏–ª–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.
    </div>

    <script>
        // --- –ù–ê–°–¢–†–û–ô–ö–ò (–ò–ó–ú–ï–ù–Ø–¢–¨ –¢–£–¢) ---
        
        // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ "–ü—Ä–æ–∏–≥—Ä—ã—à–∞" (–î–æ–ø—Å–∞)
        const imageDopsa = "https://media.istockphoto.com/id/1135293361/photo/stressed-young-man.jpg?s=612x612&w=0&k=20&c=L_Gv8g7T8YjQou6w5uVjPq-s3A3xZkQ5Kx4kG_z1z1E="; 

        // chance: 1.0 = 100% –∞–≤—Ç–æ–º–∞—Ç, 0.0 = 100% –¥–æ–ø—Å–∞
        const subjects = {
            "cs": { 
                name: "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", 
                teacher: "–ü—Ä–µ–ø. –°–∏–¥–æ—Ä–æ–≤ –ê.–ê.", 
                chance: 0.8, // 80% —É—Å–ø–µ—Ö–∞
                img: "https://via.placeholder.com/1920x1080/0000FF/808080?text=Teacher+Informatics" 
            },
            "history": { 
                name: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", 
                teacher: "–î–æ—Ü. –†—é—Ä–∏–∫–æ–≤–∏—á –ò.–í.", 
                chance: 0.5, // 50/50
                img: "https://via.placeholder.com/1920x1080/8B0000/FFFFFF?text=Teacher+History" 
            },
            "prog": { 
                name: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", 
                teacher: "–°—Ç. –ø—Ä–µ–ø. –ö–æ–¥–µ—Ä –ü.–ü.", 
                chance: 0.3, // 30% —É—Å–ø–µ—Ö–∞ (—Å–ª–æ–∂–Ω–æ)
                img: "https://via.placeholder.com/1920x1080/008000/FFFFFF?text=Teacher+Programming" 
            },
            "math": { 
                name: "–í—ã—Å—à–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞", 
                teacher: "–ü—Ä–æ—Ñ. –ò–Ω—Ç–µ–≥—Ä–∞–ª–æ–≤ –•.–£.", 
                chance: 0.1, // 10% —É—Å–ø–µ—Ö–∞ (–ø–æ—á—Ç–∏ –Ω–µ—Ä–µ–∞–ª—å–Ω–æ)
                img: "https://via.placeholder.com/1920x1080/FFFFFF/000000?text=Teacher+Math" 
            },
            "org": { 
                name: "–û–†–ì", 
                teacher: "–ü—Ä–µ–ø. –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤", 
                chance: 0.95, // 95% —É—Å–ø–µ—Ö–∞ (—Ö–∞–ª—è–≤–∞)
                img: "https://via.placeholder.com/1920x1080/FFFF00/000000?text=Teacher+ORG" 
            },
            "physics": { 
                name: "–§–∏–∑–∏–∫–∞", 
                teacher: "–î–æ—Ü. –ù—å—é—Ç–æ–Ω –ò.", 
                chance: 0.4, 
                img: "https://via.placeholder.com/1920x1080/800080/FFFFFF?text=Teacher+Physics" 
            }
        };

        // --- –õ–û–ì–ò–ö–ê ---

        const select = document.getElementById('subjectSelect');
        const wheel = document.getElementById('wheel');
        const resultDiv = document.getElementById('result');
        const spinBtn = document.getElementById('spinBtn');
        const body = document.body;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞
        for (let key in subjects) {
            let opt = document.createElement('option');
            opt.value = key;
            // –î–æ–±–∞–≤–ª—è–µ–º —à–∞–Ω—Å –≤ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
            const percent = Math.round(subjects[key].chance * 100);
            opt.innerHTML = `${subjects[key].name} (–®–∞–Ω—Å: ${percent}%)`;
            select.appendChild(opt);
        }

        // --- –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∞ –∫–æ–ª–µ—Å–∞ ---
        function updateWheelVisuals() {
            const selectedKey = select.value;
            const subject = subjects[selectedKey];
            
            // –®–∞–Ω—Å –ø—Ä–æ–∏–≥—Ä—ã—à–∞ (–ö—Ä–∞—Å–Ω–∞—è –∑–æ–Ω–∞)
            const lossChance = 1.0 - subject.chance;
            // –í—ã—á–∏—Å–ª—è–µ–º —É–≥–æ–ª, –≥–¥–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–µ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–µ–ª–µ–Ω–æ–µ
            const splitDegree = lossChance * 360;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
            wheel.style.setProperty('--split-deg', `${splitDegree}deg`);
            
            // –°–±—Ä–æ—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø—Ä–µ–¥–º–µ—Ç–∞
            resetUI();
        }

        // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–µ–ª–µ–∫—Ç–µ
        select.addEventListener('change', updateWheelVisuals);
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateWheelVisuals();

        let currentRotation = 0;

        function resetUI() {
            resultDiv.innerHTML = "–ö—Ä—É—Ç–∏—Ç–µ –±–∞—Ä–∞–±–∞–Ω!";
            resultDiv.className = "result-text";
            body.style.backgroundImage = "none";
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        resetUI();


        function spinRoulette() {
            spinBtn.disabled = true;
            resetUI();
            resultDiv.innerHTML = "–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–¥—å–±—ã...";

            const selectedKey = select.value;
            const subject = subjects[selectedKey];
            
            // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—Ä–∞–Ω–µ–µ
            const isWin = Math.random() < subject.chance;

            // 2. –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤—Ä–∞—â–µ–Ω–∏—è
            // –ù–∞—à–∞ —Å—Ç—Ä–µ–ª–∫–∞ —Å—Ç–æ–∏—Ç —Å–ø—Ä–∞–≤–∞ (–Ω–∞ 90deg –≤–∏–∑—É–∞–ª—å–Ω–æ).
            // –ö—Ä–∞—Å–Ω–∞—è –∑–æ–Ω–∞ (–î–æ–ø—Å–∞) –∏–¥–µ—Ç –æ—Ç 0deg –¥–æ splitDegree.
            // –ó–µ–ª–µ–Ω–∞—è –∑–æ–Ω–∞ (–ê–≤—Ç–æ–º–∞—Ç) –∏–¥–µ—Ç –æ—Ç splitDegree –¥–æ 360deg.
            
            const lossChance = 1.0 - subject.chance;
            const splitDegree = lossChance * 360;
            
            // –û—Ç—Å—Ç—É–ø –æ—Ç –≥—Ä–∞–Ω–∏—Ü —Å–µ–∫—Ç–æ—Ä–æ–≤, —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞–ª–æ –Ω–∞ —Å—Ç—ã–∫
            const padding = 10; 
            
            let targetAngleOnWheel;

            if (isWin) {
                // –î–æ–ª–∂–Ω–æ –≤—ã–ø–∞—Å—Ç—å –≤ –∑–µ–ª–µ–Ω–æ–π –∑–æ–Ω–µ (–æ—Ç splitDegree –¥–æ 360)
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –∑–æ–Ω—ã —Å —É—á–µ—Ç–æ–º –æ—Ç—Å—Ç—É–ø–æ–≤
                const min = splitDegree + padding;
                const max = 360 - padding;
                 // –ï—Å–ª–∏ —Å–µ–∫—Ç–æ—Ä —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞, –±–µ—Ä–µ–º —Å–µ—Ä–µ–¥–∏–Ω—É
                targetAngleOnWheel = (max > min) ? (Math.random() * (max - min) + min) : (splitDegree + (360-splitDegree)/2);

            } else {
                // –î–æ–ª–∂–Ω–æ –≤—ã–ø–∞—Å—Ç—å –≤ –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ (–æ—Ç 0 –¥–æ splitDegree)
                const min = padding;
                const max = splitDegree - padding;
                 // –ï—Å–ª–∏ —Å–µ–∫—Ç–æ—Ä —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞, –±–µ—Ä–µ–º —Å–µ—Ä–µ–¥–∏–Ω—É
                targetAngleOnWheel = (max > min) ? (Math.random() * (max - min) + min) : (splitDegree / 2);
            }

            // –ß—Ç–æ–±—ã —Ü–µ–ª–µ–≤–æ–π —É–≥–æ–ª –Ω–∞ –∫–æ–ª–µ—Å–µ –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π (–∫–æ—Ç–æ—Ä–∞—è –Ω–∞ 90 –≥—Ä–∞–¥—É—Å–∞—Ö),
            // –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–µ—Å–æ —Ç–∞–∫: Target + Rotation = 90 (mod 360)
            // Rotation = 90 - Target
            let finalOffset = 90 - targetAngleOnWheel;

            // –î–æ–±–∞–≤–ª—è–µ–º –º–Ω–æ–≥–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ (–º–∏–Ω–∏–º—É–º 5)
            const extraSpins = 5 * 360; 
            
            // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—É—é –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É –≤—Ä–∞—â–µ–Ω–∏—è, –ø—Ä–∏–±–∞–≤–ª—è—è –∫ —Ç–µ–∫—É—â–µ–π
            // –ù–∞—Ö–æ–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π "–±–∞–∑–æ–≤—ã–π" —É–≥–æ–ª, –∫—Ä–∞—Ç–Ω—ã–π 360, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–ª–µ–∫–æ –≤–ø–µ—Ä–µ–¥–∏
            let nextBase = Math.ceil(currentRotation / 360) * 360 + extraSpins;
            let finalGoalRotation = nextBase + finalOffset;

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ
            wheel.style.transform = `rotate(${finalGoalRotation}deg)`;
            
            // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–∞
            currentRotation = finalGoalRotation;

            // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (4 —Å–µ–∫—É–Ω–¥—ã, –∫–∞–∫ –≤ CSS transition)
            setTimeout(() => {
                showResult(isWin, subject);
                spinBtn.disabled = false;
            }, 4000);
        }

        function showResult(isWin, subject) {
            if (isWin) {
                resultDiv.innerHTML = `üéâ –ê–í–¢–û–ú–ê–¢! üéâ<br><small>${subject.teacher}: "–õ–∞–¥–Ω–æ, –¥–∞–≤–∞–π—Ç–µ –∑–∞—á—ë—Ç–∫—É."</small>`;
                resultDiv.classList.add('win');
                body.style.backgroundImage = `url('${subject.img}')`;
            } else {
                resultDiv.innerHTML = `üíÄ –î–û–ü–°–ê üíÄ<br><small>${subject.teacher}: "–£–≤–∏–¥–∏–º—Å—è –Ω–∞ –ø–µ—Ä–µ—Å–¥–∞—á–µ."</small>`;
                resultDiv.classList.add('lose');
                body.style.backgroundImage = `url('${imageDopsa}')`;
            }
        }
    </script>
</body>
</html>